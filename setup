## Links
ln -s ~/.dotfiles/local/fonts ~/.local/
ln -s ~/.dotfiles/config/wofi/ ~/.config/
ln -s ~/.dotfiles/config/waybar/ ~/.config/
ln -s ~/.dotfiles/config/sway/ ~/.config/
ln -s ~/.dotfiles/config/spotify-adblock/ ~/.config/
ln -s ~/.dotfiles/config/spicetify/ ~/.config/
ln -s ~/.dotfiles/config/mpv/mpv.conf ~/.config/mpv/
ln -s ~/.dotfiles/config/mako ~/.config/
ln -s ~/.dotfiles/config/fish ~/.config/
ln -s ~/.dotfiles/.scripts ~/

sudo ln -sf /run/systemd/resolve/stub-resolv.conf /etc/resolv.conf

## Systemctl
systemctl set-default multi-user.target
systemctl enable fstrim.timer
systemctl enable undervolt.service
systemctl enable iwd
systemctl enable thermald.service
systemctl enable auto-cpufreq
systemctl enable systemd-resolved
systemctl enable nohang-desktop.service
systemctl enable irqbalance.service
systemctl enable disable-usb-wakeup.service
systemctl enable preload.service
systemctl enable --user psd
systemctl enable ananicy.service

## Installs
### Install yay
pacman -S yay

cd /opt
sudo git clone https://aur.archlinux.org/yay-git.git
sudo chown -R $USER:$USER /opt/yay-git/
cd yay-git&&makepkg -si

#### Programs
alacritty anki bleachbit calibre eog evince ferdi-bin gnome-disk-utility gucharmap iwgtk lxappearance nemo nwg-bar nwg-launchers polkit-gnome qalculate-gtk rhythmbox scrcpy signal-desktop spotify stretchly-bin superproductivity-bin sway unarchiver ungoogled-chromium ventoy-bin waydroid xarchiver gcompris-qt  mpv  ferdi-bin
#### CLI
apparmor auto-cpufreq autotiling bandwhich bat brightnessctl cage  clipman ddi duf efibootmgr exa extramaus fd  hdparm htop-vim  imv intel-undervolt iw kiwix-tools-bin lostfiles megatools-bin miniserve ncdu  pacman-contrib pacutils pamixer pfetch-git pipe-viewer-git powerpill playerctl python-spotdl smartmontools smenu spicetify-cli strongswan subdl tmpmail trash-cli typiskt usbutils vi vim wev wf-recorder-git wireless_tools xplr zoxide fish aria2 bemenu-wayland extramaus grim lostfiles  opendoas pipewire pipewire-pulse swayidle unrar unzip wf-recorder-git xdg-desktop-portal-wlr xplr cfs-zen-tweaks
#### Other
ananicy archlinux-keyring appimagelauncher gstreamer-vaapi intel-ucode intel-ucode-clear irqbalance kora-icon-theme libva-utils linux-xanmod-anbox man-db mesa-utils mtpfs nohang otf-manjari profile-sync-daemon-librewolf preload preloader-signed qgnomeplatform skeuos-gtk starship sway-audio-idle-inhibit-git thermald ttf-clear-sans ttf-nerd-fonts-symbols ttf-roboto-mono ttf-twemoji udiskie wlsunset-git zram-generator booster btrfs-progs cage clipman gst-plugin-pipewire gst-plugins-bad gst-plugins-good hunspell intel-ucode intel-hybrid-codec-driver intel-ucode-clear opendoas-sudo  sway-audio-idle-inhibit-git thermald mako cfs-zen-tweaks

### Setup
#### Chaotic AUR
pacman-key --recv-key FBA220DFC880C036 --keyserver keyserver.ubuntu.com
pacman-key --lsign-key FBA220DFC880C036
 pacman -U 'https://cdn-mirror.chaotic.cx/chaotic-aur/chaotic-keyring.pkg.tar.zst' 'https://cdn-mirror.chaotic.cx/chaotic-aur/chaotic-mirrorlist.pkg.tar.zst'

 /etc/pacman.conf
[chaotic-aur]
Include = /etc/pacman.d/chaotic-mirrorlist 

### tmpdisk
echo 'tmpfs /tmp tmpfs defaults,noatime,nosuid,nodev,mode=1777,size=512M 0 0' | sudo tee -a /etc/fstab
### ZRAM
/etc/systemd/zram-generator.conf
[zram0]
zram-size = ram / 2
systemctl start /dev/zram0
### Sway
python -m ensurepip --upgrade
pip3 install i3ipc
### psd
systemctl --user enable psd.service
### spcetify
sudo chmod a+wr /opt/spotify
sudo chmod a+wr /opt/spotify/Apps -R
spicetify apply
### Spotify adblock
wget https://github.com/abba23/spotify-adblock/releases/download/v1.0.0/spotify-adblock.so
wget https://raw.githubusercontent.com/abba23/spotify-adblock/main/config.toml
sudo mv spotify-adblock.so /usr/local/lib/spotify-adblock.so
sudo mkdir /etc/spotify-adblock
sudo mv config.toml /etc/spotify-adblock/config.toml
env LD_PRELOAD=/usr/local/lib/spotify-adblock.so spotify
#### LibreWolf

##### Packages
hunspell-en_gb librewolf-extension-bitwarden librewolf-extension-dark-reader

## Uninstalls
mkinitcpio sudo networkmanager

## Other
#### List modified files under /var
pacman -Qii | awk '/^MODIFIED/ {print $2}'
#### List unowned files
lostfiles
#### Sort pacman mirrors
 cp /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.backup
 awk '/^## Country Name$/{f=1; next}f==0{next}/^$/{exit}{print substr($0, 1);}' /etc/pacman.d/mirrorlist.backup
 sed -i 's/^#Server/Server/' /etc/pacman.d/mirrorlist.backup
 rankmirrors -n 6 /etc/pacman.d/mirrorlist.backup > /etc/pacman.d/mirrorlist
#### Fetching live mirror
curl -s "https://archlinux.org/mirrorlist/?country=FR&country=GB&protocol=https&use_mirror_status=on" | sed -e 's/^#Server/Server/' -e '/^#/d' | rankmirrors -n 5 -
